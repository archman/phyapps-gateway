$(function(){$(".btn-del-user").click(function(){var a=$(this).data("uname")
confirm("Are you sure to delete '"+a+"'?")&&$.ajax({type:"DELETE",url:$(this).data("url"),success:function(){alert("User Deleted"),location.reload()},error:function(){alert("Delete Failed")}})}),$(".btn-edit-user").click(function(){var a=$(this).data("uname"),e=$(this).data("cname"),o=$(this).data("desc"),t=$(this).data("curl"),n=$(this).data("url")
$(".modal-body #username").val(a),$(".modal-body #container_name").val(e),$(".modal-body #description").val(o),$(".modal-body #notebook_url").val(t),$(".modal-body #user_url").val(n)}),$(".submit-update-user").click(function(){var a=$(".modal-body #username").val(),e=$(".modal-body #password").val(),o=$(".modal-body #description").val(),t=$(".modal-body #user_url").val(),n={name:a,password:e,description:o}
$.ajax({type:"PUT",url:t,data:JSON.stringify(n),contentType:"application/json; charset=utf-8",success:function(){alert("User Updated"),location.reload()},error:function(){alert("Update Failed")}})}),$(".submit-create-user").click(function(){var a=$(".modal-body #new_username").val(),e=$(".modal-body #new_password").val(),o=$(".modal-body #new_container_id").val(),t=$(".modal-body #new_description").val(),n=$(".open-create-user").data("url"),l={username:a,password:e,description:t,container_id:o}
$.ajax({type:"POST",url:n,data:JSON.stringify(l),contentType:"application/json; charset=utf-8",success:function(){alert("User Created"),location.reload()},error:function(){alert("Create Failed")}})}),$(".btn-edit-container").click(function(){var a=$(this).data("curl"),e=$(this).data("cid"),o=$(this).data("cname"),t=$(this).data("uname")
$(".modal-body #uname").val(t),$(".modal-body #cid").val(e),$(".modal-body #cname").val(o),$(".modal-body #notebook_url").val(a)}),$(".btn-start-service").click(function(a){a.preventDefault()
var e=$("#uname").val(),o=$("#clist").val(),t=$("#csect").val(),n=$(this).data("url"),l={image:o,mach:t,uname:e}
"notebook"==o&&(l.mach=""),console.log("---Starting Service---"),console.log("uname:",e),console.log("cimage:",o),console.log("section:",t),console.log("url:",n),console.log(JSON.stringify(l)),$.ajax({type:"POST",url:n,data:JSON.stringify(l),contentType:"application/json; charset=utf-8",success:function(a){$(".modal-body #cid").val(a.id),$(".modal-body #cname").val(a.name),$(".modal-body #notebook_url").val(a.nb_url),alert("New service created")},error:function(){alert("Failed to create new service!")}})}),$(".submit-update-container").click(function(){var a=$(".btn-edit-container").data("url"),e=($(".modal-body #notebook_url").val(),$(".modal-body #cname").val()),o={container_name:e}
console.log("--- Update container status ---"),console.log(JSON.stringify(o)),console.log(a),$.ajax({type:"PUT",url:a,data:JSON.stringify(o),contentType:"application/json; charset=utf-8",success:function(){alert("User's service updated"),location.reload()},error:function(){alert("Failed to update user's service, START and UPDATE again.")}})})})
